## Reference from https://github.com/crystalidea/qt-build-tools/tree/master/5.15.2
Only in ./qt-everywhere-src-5.15.2/qtbase: .QT-ENTERPRISE-LICENSE-AGREEMENT
Only in ./qt-everywhere-src-5.15.2/qtbase: .QT-FOR-APPLICATION-DEVELOPMENT-LICENSE-AGREEMENT
Only in ./qt-everywhere-src-5.15.2/qtbase: .QT-FOR-AUTOMATION-LICENSE-AGREEMENT
Only in ./qt-everywhere-src-5.15.2/qtbase: .QT-FOR-AUTOMOTIVE-LICENSE-AGREEMENT
Only in ./qt-everywhere-src-5.15.2/qtbase: .QT-FOR-DEVICE-CREATION-LICENSE-AGREEMENT
Only in ./qt-everywhere-src-5.15.2/qtbase: .qmake.conf
Only in ./qt-everywhere-src-5.15.2/qtbase: .release-timestamp
Only in ./qt-everywhere-src-5.15.2/qtbase: .tag
Only in ./qt-everywhere-src-5.15.2/qtbase: INSTALL
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.FDL
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.GPL2
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.GPL3
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.GPL3-EXCEPT
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.LGPL3
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.LGPLv3
Only in ./qt-everywhere-src-5.15.2/qtbase: LICENSE.QT-LICENSE-AGREEMENT
Only in ./qt-everywhere-src-5.15.2/qtbase: bin
Only in ./qt-everywhere-src-5.15.2/qtbase: config.tests
Only in ./qt-everywhere-src-5.15.2/qtbase: config_help.txt
Only in ./qt-everywhere-src-5.15.2/qtbase: configure
Only in ./qt-everywhere-src-5.15.2/qtbase: configure.bat
Only in ./qt-everywhere-src-5.15.2/qtbase: configure.json
Only in ./qt-everywhere-src-5.15.2/qtbase: configure.pri
Only in ./qt-everywhere-src-5.15.2/qtbase: dist
Only in ./qt-everywhere-src-5.15.2/qtbase: doc
Only in ./qt-everywhere-src-5.15.2/qtbase: examples
Only in ./qt-everywhere-src-5.15.2/qtbase: include
Only in ./qt-everywhere-src-5.15.2/qtbase: lib
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: aix-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: aix-g++-64
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: android-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: aix
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: android
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: angle.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: bsd
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: c89
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: clang-mac.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: clang.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: g++-base.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: g++-macx.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: g++-unix.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: g++-win32.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: g++.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: gcc-base-mac.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: gcc-base-unix.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: gcc-base.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: ghs-base.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: ghs-integrity-armv7.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: ghs-integrity-armv8.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: ghs-integrity-x86.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: icc-base-unix.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: integrity
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: ios.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: linux.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: llvm.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: mac
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: mac.conf
diff -ru ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common/macx.conf ./5.15.2/qtbase/mkspecs/common/macx.conf
--- ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common/macx.conf	2021-11-17 14:43:47.000000000 +0700
+++ ./5.15.2/qtbase/mkspecs/common/macx.conf	2021-11-17 14:45:14.000000000 +0700
@@ -12,7 +12,7 @@
 # older SDKs we have to keep this.
 QT_MAC_SDK_VERSION_MIN = 10.14
 
-QT_MAC_SDK_VERSION_MAX = 10.15
+QT_MAC_SDK_VERSION_MAX = 11.3
 
 device.sdk = macosx
 device.target = device
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: msvc-based-version.conf
diff -ru ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common/msvc-desktop.conf ./5.15.2/qtbase/mkspecs/common/msvc-desktop.conf
--- ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common/msvc-desktop.conf	2021-11-17 14:43:47.000000000 +0700
+++ ./5.15.2/qtbase/mkspecs/common/msvc-desktop.conf	2021-11-17 14:45:14.000000000 +0700
@@ -38,7 +38,7 @@
 QMAKE_CFLAGS            = -nologo -Zc:wchar_t
 QMAKE_CFLAGS_WARN_ON    = -W3
 QMAKE_CFLAGS_WARN_OFF   = -W0
-QMAKE_CFLAGS_RELEASE    = $$QMAKE_CFLAGS_OPTIMIZE -MD
+QMAKE_CFLAGS_RELEASE    = $$QMAKE_CFLAGS_OPTIMIZE -Zi -MD
 QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO += $$QMAKE_CFLAGS_OPTIMIZE -Zi -MD
 QMAKE_CFLAGS_DEBUG      = -Zi -MDd
 QMAKE_CFLAGS_YACC       =
@@ -100,7 +100,7 @@
 
 QMAKE_LIBS              =
 QMAKE_LIBS_GUI          = gdi32.lib comdlg32.lib oleaut32.lib imm32.lib winmm.lib ws2_32.lib ole32.lib uuid.lib user32.lib advapi32.lib
-QMAKE_LIBS_NETWORK      = ws2_32.lib
+QMAKE_LIBS_NETWORK      = ws2_32.lib user32.lib gdi32.lib
 QMAKE_LIBS_OPENGL       = glu32.lib opengl32.lib gdi32.lib user32.lib
 QMAKE_LIBS_OPENGL_ES2   = gdi32.lib user32.lib
 QMAKE_LIBS_OPENGL_ES2_DEBUG = gdi32.lib user32.lib
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: msvc-version.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: nacl
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: posix
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qcc-base-qnx-aarch64le.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qcc-base-qnx-armle-v7.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qcc-base-qnx-x86-64.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qcc-base-qnx-x86.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qcc-base-qnx.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qcc-base.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: qnx
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: rtems
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: rtems-base.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: sanitize.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: shell-unix.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: shell-win32.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: solaris.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: tvos.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: uikit
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: uikit.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: unix.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: watchos.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: windows-desktop.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: windows-vulkan.conf
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs/common: winrt_winphone
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: cygwin-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: darwin-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: devices
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: dummy
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: features
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: freebsd-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: freebsd-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: haiku-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: hpuxi-g++-64
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: hurd-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: integrity-armv7
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: integrity-armv7-imx6
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: integrity-armv8-rcar
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: integrity-x86
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-aarch64-gnu-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-arm-gnueabi-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-clang-32
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-clang-libc++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-clang-libc++-32
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-g++-32
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-g++-64
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-icc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-icc-32
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-icc-64
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-icc-k1om
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-llvm
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: linux-lsb-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: lynxos-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-icc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-ios-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-tvos-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-watchos-clang
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: macx-xcode
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: modules
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: netbsd-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: openbsd-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: qnx-aarch64le-qcc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: qnx-armle-v7-qcc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: qnx-x86-64-qcc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: qnx-x86-qcc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: solaris-cc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: solaris-cc-64
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: solaris-cc-64-stlport
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: solaris-cc-stlport
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: solaris-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: solaris-g++-64
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: unsupported
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: wasm-emscripten
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-arm64-msvc2017
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-clang-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-clang-msvc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-g++
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-icc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-icc-k1om
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: win32-msvc
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-arm-msvc2015
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-arm-msvc2017
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-arm-msvc2019
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-arm64-msvc2017
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-arm64-msvc2019
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-x64-msvc2015
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-x64-msvc2017
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-x64-msvc2019
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-x86-msvc2015
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-x86-msvc2017
Only in ./qt-everywhere-src-5.15.2/qtbase/mkspecs: winrt-x86-msvc2019
Only in ./5.15.2/qtbase: openssl-1.1.1k
Only in ./qt-everywhere-src-5.15.2/qtbase: qmake
Only in ./qt-everywhere-src-5.15.2/qtbase: qtbase.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: README
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: VulkanMemoryAllocator
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: VulkanMemoryAllocator.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: _clang-format
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: android
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: angle
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: dbus-ifaces
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: double-conversion
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: easing
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: forkfd
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: freebsd
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: freetype
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: gradle
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: harfbuzz
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: AUTHORS
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: COPYING
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: NEWS
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: README
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: THANKS
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: TODO
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: config.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: harfbuzz-ng.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: include
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: patches
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng: qt_attribution.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-atomic-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-blob.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-blob.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-buffer-deserialize-json.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-buffer-deserialize-text.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-buffer-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-buffer-serialize.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-buffer.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-buffer.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-cache-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-common.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-common.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.cc ./5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.cc
--- ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.cc	2021-11-17 14:43:48.000000000 +0700
+++ ./5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.cc	2021-11-17 14:45:14.000000000 +0700
@@ -1322,7 +1322,7 @@
 hb_coretext_aat_shaper_face_data_t *
 _hb_coretext_aat_shaper_face_data_create (hb_face_t *face)
 {
-  static const hb_tag_t tags[] = {HB_CORETEXT_TAG_MORX, HB_CORETEXT_TAG_MORT, HB_CORETEXT_TAG_KERX};
+  static const hb_tag_t tags[] = {HB_CORETEXT_TAG_MORX, HB_CORETEXT_TAG_MORT, HB_CORETEXT_TAG_KERX, HB_CORETEXT_TAG_TRAK};
 
   for (unsigned int i = 0; i < ARRAY_LENGTH (tags); i++)
   {
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.h ./5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.h
--- ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.h	2021-11-17 14:43:48.000000000 +0700
+++ ./5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src/hb-coretext.h	2021-11-17 14:45:14.000000000 +0700
@@ -43,7 +43,7 @@
 #define HB_CORETEXT_TAG_MORT HB_TAG('m','o','r','t')
 #define HB_CORETEXT_TAG_MORX HB_TAG('m','o','r','x')
 #define HB_CORETEXT_TAG_KERX HB_TAG('k','e','r','x')
-
+#define HB_CORETEXT_TAG_TRAK HB_TAG('t','r','a','k')
 
 HB_EXTERN hb_face_t *
 hb_coretext_face_create (CGFontRef cg_font);
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-debug.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-deprecated.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-dsalgs.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-face-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-face.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-face.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-fallback-shape.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-font-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-font.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-font.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-mutex-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-object-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-open-file-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-open-type-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-cbdt-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-cmap-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-font.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-font.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-glyf-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-head-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-hhea-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-hmtx-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-kern-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-common-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-gdef-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-gpos-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-gsub-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-gsubgpos-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-jstf-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-math-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-layout.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-map-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-map.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-math-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-math.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-math.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-maxp-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-name-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-os2-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-post-macroman.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-post-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-arabic-fallback.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-arabic-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-arabic-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-arabic-win1256.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-arabic.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-default.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-hangul.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-hebrew.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-indic-machine.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-indic-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-indic-table.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-indic.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-myanmar-machine.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-myanmar.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-thai.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-tibetan.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-use-machine.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-use-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-use-table.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-complex-use.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-fallback-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-fallback.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-normalize-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-normalize.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-shape.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-tag.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-tag.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-var-avar-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-var-fvar-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-var-hvar-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-var-mvar-table.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-var.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot-var.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-ot.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-set-digest-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-set-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-set.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-set.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shape-plan-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shape-plan.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shape-plan.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shape.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shape.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shaper-impl-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shaper-list.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shaper-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-shaper.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-string-array.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-unicode-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-unicode.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-unicode.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-utf-private.hh
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-version.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb-warning.cc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty/harfbuzz-ng/src: hb.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: iaccessible2
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: icc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: libjpeg
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: libjpeg.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: libpng
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: md4
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: md4c
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: md4c.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: md5
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: pcre2
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: pixman
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: rfc6234
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: sha1
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: sha3
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: sqlite
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: sqlite.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: tinycbor
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: wasm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: wintab
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: xcb
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: zlib
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: zlib.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/3rdparty: zlib_dependency.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src: android
Only in ./qt-everywhere-src-5.15.2/qtbase/src: angle
Only in ./qt-everywhere-src-5.15.2/qtbase/src: concurrent
Only in ./qt-everywhere-src-5.15.2/qtbase/src: corelib
Only in ./qt-everywhere-src-5.15.2/qtbase/src: dbus
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: Qt5GuiConfigExtras.cmake.in
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: QtGui.dynlist
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: accessible
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: animation
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: configure.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: configure.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: doc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: gui.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: image
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: itemmodels
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: kernel
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: math3d
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: opengl
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: painting
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: platform
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: qtgui.tracepoints
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: rhi
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: AGLFN_LICENSE.txt
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qabstracttextdocumentlayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qabstracttextdocumentlayout.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qabstracttextdocumentlayout_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qcssparser.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qcssparser_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qcssscanner.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qdistancefield.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qdistancefield_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfont.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfont.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfont_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontdatabase.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontdatabase.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/gui/text/qfontengine.cpp ./5.15.2/qtbase/src/gui/text/qfontengine.cpp
--- ./qt-everywhere-src-5.15.2/qtbase/src/gui/text/qfontengine.cpp	2021-11-17 14:43:49.000000000 +0700
+++ ./5.15.2/qtbase/src/gui/text/qfontengine.cpp	2021-11-17 14:45:14.000000000 +0700
@@ -1815,7 +1815,7 @@
 
 void QFontEngineMulti::ensureEngineAt(int at)
 {
-    if (!m_fallbackFamiliesQueried)
+    if (!m_fallbackFamiliesQueried && at > 0)
         ensureFallbackFamiliesQueried();
     Q_ASSERT(at < m_engines.size());
     if (!m_engines.at(at)) {
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontengine_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontengine_qpf2.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontengine_qpf2_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontengineglyphcache.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontengineglyphcache_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontinfo.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontmetrics.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontmetrics.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontsubset.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontsubset_agl.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfontsubset_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfragmentmap.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qfragmentmap_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qglyphrun.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qglyphrun.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qglyphrun_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qharfbuzzng.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qharfbuzzng_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qinputcontrol.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qinputcontrol_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qplatformfontdatabase.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qplatformfontdatabase.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qrawfont.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qrawfont.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qrawfont_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qstatictext.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qstatictext.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qstatictext_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qsyntaxhighlighter.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qsyntaxhighlighter.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qt_attribution.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextcursor.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextcursor.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextcursor_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocument.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocument.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocument_p.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocument_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentfragment.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentfragment.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentfragment_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentlayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentlayout_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentwriter.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextdocumentwriter.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextengine.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextengine_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextformat.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextformat.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextformat_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtexthtmlparser.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtexthtmlparser_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextimagehandler.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextimagehandler_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextlayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextlayout.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextlist.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextlist.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextmarkdownimporter.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextmarkdownimporter_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextmarkdownwriter.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextmarkdownwriter_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextobject.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextobject.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextobject_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextodfwriter.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextodfwriter_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextoption.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtextoption.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtexttable.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtexttable.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qtexttable_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qzip.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qzipreader_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: qzipwriter_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui/text: text.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: util
Only in ./qt-everywhere-src-5.15.2/qtbase/src/gui: vulkan
Only in ./qt-everywhere-src-5.15.2/qtbase/src: network
Only in ./qt-everywhere-src-5.15.2/qtbase/src: opengl
Only in ./qt-everywhere-src-5.15.2/qtbase/src: openglextensions
Only in ./qt-everywhere-src-5.15.2/qtbase/src: platformheaders
Only in ./qt-everywhere-src-5.15.2/qtbase/src: platformsupport
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: bearer
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: doc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: generic
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: imageformats
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: platforminputcontexts
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: README
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: android
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: bsdfb
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: COCOA_LICENSE.txt
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: cocoa.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: cocoa.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: images
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: main.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaaccessibility.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa/qcocoaaccessibility.mm ./5.15.2/qtbase/src/plugins/platforms/cocoa/qcocoaaccessibility.mm
--- ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa/qcocoaaccessibility.mm	2021-11-17 14:43:49.000000000 +0700
+++ ./5.15.2/qtbase/src/plugins/platforms/cocoa/qcocoaaccessibility.mm	2021-11-17 14:45:14.000000000 +0700
@@ -386,6 +386,8 @@
     }
 
     if (interface->state().checkable) {
+    	if (interface->state().checkStateMixed)
+            return @(2);
         return interface->state().checked ? @(1) : @(0);
     }
 
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaaccessibilityelement.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaaccessibilityelement.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaapplication.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaapplication.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaapplicationdelegate.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaapplicationdelegate.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoabackingstore.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoabackingstore.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaclipboard.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaclipboard.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoacolordialoghelper.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoacolordialoghelper.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoacursor.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoacursor.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoadrag.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoadrag.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaeventdispatcher.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaeventdispatcher.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoafiledialoghelper.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoafiledialoghelper.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoafontdialoghelper.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoafontdialoghelper.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaglcontext.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaglcontext.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoahelpers.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoahelpers.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoainputcontext.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoainputcontext.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaintegration.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaintegration.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaintrospection.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaintrospection.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoakeymapper.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoakeymapper.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenu.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenu.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenubar.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenubar.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenuitem.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenuitem.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenuloader.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamenuloader.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamimetypes.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoamimetypes.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoanativeinterface.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoanativeinterface.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoansmenu.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoansmenu.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaprintdevice.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaprintdevice.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaprintersupport.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaprintersupport.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaresources.qrc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoascreen.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoascreen.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaservices.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoaservices.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoasessionmanager.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoasessionmanager.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoasystemtrayicon.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoasystemtrayicon.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoatheme.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoatheme.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoavulkaninstance.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoavulkaninstance.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoawindow.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoawindow.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoawindowmanager.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qcocoawindowmanager.mm
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa/qiosurfacegraphicsbuffer.h ./5.15.2/qtbase/src/plugins/platforms/cocoa/qiosurfacegraphicsbuffer.h
--- ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa/qiosurfacegraphicsbuffer.h	2021-11-17 14:46:52.000000000 +0700
+++ ./5.15.2/qtbase/src/plugins/platforms/cocoa/qiosurfacegraphicsbuffer.h	2021-11-17 14:45:14.000000000 +0700
@@ -45,6 +45,9 @@
 
 QT_BEGIN_NAMESPACE
 
+#include <CoreGraphics/CGColorSpace.h>
+#include <IOSurface/IOSurface.h>
+
 class QIOSurfaceGraphicsBuffer : public QPlatformGraphicsBuffer
 {
 public:
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qiosurfacegraphicsbuffer.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qmacclipboard.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qmacclipboard.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qmultitouch_mac.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qmultitouch_mac_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_accessibility.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_complextext.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_dragging.mm
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa/qnsview_drawing.mm ./5.15.2/qtbase/src/plugins/platforms/cocoa/qnsview_drawing.mm
--- ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa/qnsview_drawing.mm	2021-11-17 14:43:49.000000000 +0700
+++ ./5.15.2/qtbase/src/plugins/platforms/cocoa/qnsview_drawing.mm	2021-11-17 14:45:14.000000000 +0700
@@ -73,8 +73,15 @@
     // by AppKit at a point where we've already set up other parts of the platform plugin
     // based on the presence of layers or not. Once we've rewritten these parts to support
     // dynamically picking up layer enablement we can let AppKit do its thing.
-    return QMacVersion::buildSDK() >= QOperatingSystemVersion::MacOSMojave
-        && QMacVersion::currentRuntime() >= QOperatingSystemVersion::MacOSMojave;
+
+    if (QMacVersion::currentRuntime() >= QOperatingSystemVersion::MacOSBigSur)
+        return true; // Big Sur always enables layer-backing, regardless of SDK
+
+    if (QMacVersion::currentRuntime() >= QOperatingSystemVersion::MacOSMojave
+        && QMacVersion::buildSDK() >= QOperatingSystemVersion::MacOSMojave)
+        return true; // Mojave and Catalina enable layers based on the app's SDK
+
+    return false; // Prior versions needed explicitly enabled layer backing
 }
 
 - (BOOL)layerExplicitlyRequested
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_gestures.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_keys.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_menus.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_mouse.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_tablet.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnsview_touch.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnswindow.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnswindow.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnswindowdelegate.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qnswindowdelegate.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qpaintengine_mac.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qpaintengine_mac_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qprintengine_mac.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qprintengine_mac_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms/cocoa: qt_attribution.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: direct2d
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: directfb
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: eglfs
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: haiku
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: integrity
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: ios
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: linuxfb
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: minimal
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: minimalegl
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: offscreen
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: openwfd
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: platforms.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: qnx
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: vnc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: wasm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: windows
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: winrt
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/platforms: xcb
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: platformthemes
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: plugins.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: printsupport
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins: sqldrivers
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles: android
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac: mac.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac: macstyle.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac: main.mm
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac/qmacstyle_mac.mm ./5.15.2/qtbase/src/plugins/styles/mac/qmacstyle_mac.mm
--- ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac/qmacstyle_mac.mm	2021-11-17 14:43:50.000000000 +0700
+++ ./5.15.2/qtbase/src/plugins/styles/mac/qmacstyle_mac.mm	2021-11-17 14:45:14.000000000 +0700
@@ -195,6 +195,10 @@
 const int QMacStylePrivate::PushButtonRightOffset = 12;
 const int QMacStylePrivate::PushButtonContentPadding = 6;
 
+const int pushButtonBevelRectOffsets[3] = {
+    QMacStylePrivate::PushButtonLeftOffset, 5, 5
+};
+
 QVector<QPointer<QObject> > QMacStylePrivate::scrollBars;
 
 // Title bar gradient colors for Lion were determined by inspecting PSDs exported
@@ -1174,6 +1178,8 @@
     case SegmentedControl_Middle:
     case TextField: {
         auto innerRect = targetRect;
+        if (cw.type == Button_SquareButton)
+            innerRect = cw.adjustedControlFrame(targetRect.adjusted(hMargin, vMargin, -hMargin, -vMargin));
         if (cw.type == TextField)
             innerRect = innerRect.adjusted(hMargin, vMargin, -hMargin, -vMargin).adjusted(0.5, 0.5, -0.5, -0.5);
         const auto outerRect = innerRect.adjusted(-focusRingWidth, -focusRingWidth, focusRingWidth, focusRingWidth);
@@ -1208,9 +1214,38 @@
         focusRingPath.addEllipse(rbOuterRect);
         break;
     }
-    case Button_PopupButton:
     case Button_PullDown:
-    case Button_PushButton:
+    case Button_PushButton: {
+        const bool isBigSurOrAbove = QOperatingSystemVersion::current() >= QOperatingSystemVersion::MacOSBigSur;
+        QRectF focusRect;
+        auto *pb = static_cast<NSButton *>(cocoaControl(cw));
+        const QRectF frameRect = cw.adjustedControlFrame(targetRect.adjusted(hMargin, vMargin, -hMargin, -vMargin));
+        pb.frame = frameRect.toCGRect();
+        focusRect = QRectF::fromCGRect([pb alignmentRectForFrame:pb.frame]);
+        if (cw.type == QMacStylePrivate::Button_PushButton) {
+            focusRect -= pushButtonShadowMargins[cw.size];
+        }
+        else if (cw.type == QMacStylePrivate::Button_PullDown) {
+            focusRect -= pullDownButtonShadowMargins[cw.size];
+            //fix focus ring drawn slightly off for pull downs
+            if (cw.size == QStyleHelper::SizeLarge)
+                focusRect = focusRect.adjusted(0, 0, 0, -1);
+            else if (cw.size == QStyleHelper::SizeMini)
+                focusRect = focusRect.adjusted(0, -1, 0, 0);
+        }
+        if (isBigSurOrAbove)
+            focusRect = focusRect.translated(0, 1);
+        const qreal innerRadius = cw.type == Button_PushButton ? 3 : 4;
+        const qreal outerRadius = innerRadius + focusRingWidth;
+        hOffset = focusRect.left();
+        vOffset = focusRect.top();
+        const auto innerRect = focusRect.translated(-focusRect.topLeft());
+        const auto outerRect = innerRect.adjusted(-hMargin, -vMargin, hMargin, vMargin);
+        focusRingPath.addRoundedRect(innerRect, innerRadius, innerRadius);
+        focusRingPath.addRoundedRect(outerRect, outerRadius, outerRadius);
+        break;
+    }
+    case Button_PopupButton:
     case SegmentedControl_Single: {
         const qreal innerRadius = cw.type == Button_PushButton ? 3 : 4;
         const qreal outerRadius = innerRadius + focusRingWidth;
@@ -1568,7 +1603,8 @@
     const auto frameSize = defaultFrameSize();
     if (type == QMacStylePrivate::Button_SquareButton) {
         frameRect = rect.adjusted(3, 1, -3, -1)
-                        .adjusted(focusRingWidth, focusRingWidth, -focusRingWidth, -focusRingWidth);
+                        .adjusted(focusRingWidth, focusRingWidth, -focusRingWidth, -focusRingWidth)
+                        .adjusted(-6.5, 0, 6.5, 0);
     } else if (type == QMacStylePrivate::Button_PushButton) {
         // Start from the style option's top-left corner.
         frameRect = QRectF(rect.topLeft(),
@@ -1577,6 +1613,8 @@
             frameRect = frameRect.translated(0, 1.5);
         else if (size == QStyleHelper::SizeMini)
             frameRect = frameRect.adjusted(0, 0, -8, 0).translated(4, 4);
+        frameRect = frameRect.adjusted(-pushButtonBevelRectOffsets[size], 0,
+                                        pushButtonBevelRectOffsets[size], 0);
     } else {
         // Center in the style option's rect.
         frameRect = QRectF(QPointF(0, (rect.height() - frameSize.height()) / 2.0),
@@ -1589,6 +1627,9 @@
                 frameRect = frameRect.adjusted(0, 0, -4, 0).translated(2, 1);
             else if (size == QStyleHelper::SizeMini)
                 frameRect = frameRect.adjusted(0, 0, -9, 0).translated(5, 0);
+            if (type == QMacStylePrivate::Button_PullDown)
+                frameRect = frameRect.adjusted(-pushButtonBevelRectOffsets[size], 0,
+                                                pushButtonBevelRectOffsets[size], 0);
         } else if (type == QMacStylePrivate::ComboBox) {
             frameRect = frameRect.adjusted(0, 0, -6, 0).translated(4, 0);
         }
@@ -3716,24 +3757,6 @@
                 arrowOpt.rect = ar;
                 proxy()->drawPrimitive(PE_IndicatorArrowDown, &arrowOpt, p, w);
             }
-
-
-            if (btn->state & State_HasFocus) {
-                // TODO Remove and use QFocusFrame instead.
-                const int hMargin = proxy()->pixelMetric(QStyle::PM_FocusFrameHMargin, btn, w);
-                const int vMargin = proxy()->pixelMetric(QStyle::PM_FocusFrameVMargin, btn, w);
-                QRectF focusRect;
-                if (cw.type == QMacStylePrivate::Button_SquareButton) {
-                    focusRect = frameRect;
-                } else {
-                    focusRect = QRectF::fromCGRect([pb alignmentRectForFrame:pb.frame]);
-                    if (cw.type == QMacStylePrivate::Button_PushButton)
-                        focusRect -= pushButtonShadowMargins[cw.size];
-                    else if (cw.type == QMacStylePrivate::Button_PullDown)
-                        focusRect -= pullDownButtonShadowMargins[cw.size];
-                }
-                d->drawFocusRing(p, focusRect, hMargin, vMargin, cw);
-            }
         }
         break;
     case CE_PushButtonLabel:
@@ -3768,7 +3791,11 @@
                 QRect textRect = itemTextRect(
                             btn.fontMetrics, freeContentRect, Qt::AlignCenter, isEnabled, btn.text);
                 if (hasMenu) {
-                    textRect.moveTo(w ? 15 : 11, textRect.top()); // Supports Qt Quick Controls
+                    if (ct == QMacStylePrivate::Button_SquareButton)
+                        textRect.moveTo(w ? 8 : 11, textRect.top());
+                    else
+                        textRect.moveTo(w ? (15 - pushButtonBevelRectOffsets[d->effectiveAquaSizeConstrain(b, w)])
+                                            : 11, textRect.top()); // Supports Qt Quick Controls
                 }
                 // Draw the icon:
                 if (hasIcon) {
@@ -3870,6 +3897,7 @@
             const auto cs = d->effectiveAquaSizeConstrain(opt, w);
             // Extra hacks to get the proper pressed appreance when not selected or selected and inactive
             const bool needsInactiveHack = (!isActive && isSelected);
+            const bool isBigSurOrAbove = QOperatingSystemVersion::current() >= QOperatingSystemVersion::MacOSBigSur;
             const auto ct = !needsInactiveHack && (isSelected || tp == QStyleOptionTab::OnlyOneTab) ?
                     QMacStylePrivate::Button_PushButton :
                     QMacStylePrivate::Button_PopupButton;
@@ -3878,6 +3906,12 @@
             auto *pb = static_cast<NSButton *>(d->cocoaControl(cw));
 
             auto vOffset = isPopupButton ? 1 : 2;
+            if (isBigSurOrAbove) {
+                // Make it 1, otherwise, offset is very visible compared
+                // to selected tab (which is not a popup button).
+                vOffset = 1;
+            }
+
             if (tabDirection == QMacStylePrivate::East)
                 vOffset -= 1;
             const auto outerAdjust = isPopupButton ? 1 : 4;
@@ -3894,9 +3928,22 @@
                     frameRect = frameRect.adjusted(-innerAdjust, 0, outerAdjust, 0);
                 else
                     frameRect = frameRect.adjusted(-outerAdjust, 0, innerAdjust, 0);
+
+                if (isSelected && isBigSurOrAbove) {
+                    // 1 pixed of 'roundness' is still visible on the right
+                    // (the left is OK, it's rounded).
+                    frameRect = frameRect.adjusted(0, 0, 1, 0);
+                }
+
                 break;
             case QStyleOptionTab::Middle:
                 frameRect = frameRect.adjusted(-innerAdjust, 0, innerAdjust, 0);
+
+                if (isSelected && isBigSurOrAbove) {
+                    // 1 pixel of 'roundness' is still visible on both
+                    // sides - left and right.
+                    frameRect = frameRect.adjusted(-1, 0, 1, 0);
+                }
                 break;
             case QStyleOptionTab::End:
                 // Pressed state hack: tweak adjustments in preparation for flip below
@@ -3904,6 +3951,11 @@
                     frameRect = frameRect.adjusted(-innerAdjust, 0, outerAdjust, 0);
                 else
                     frameRect = frameRect.adjusted(-outerAdjust, 0, innerAdjust, 0);
+
+                if (isSelected && isBigSurOrAbove) {
+                    // 1 pixel of 'roundness' is still visible on the left.
+                    frameRect = frameRect.adjusted(-1, 0, 0, 0);
+                }
                 break;
             case QStyleOptionTab::OnlyOneTab:
                 frameRect = frameRect.adjusted(-outerAdjust, 0, outerAdjust, 0);
@@ -3951,7 +4003,10 @@
                 NSPopUpArrowPosition oldPosition = NSPopUpArrowAtCenter;
                 NSPopUpButtonCell *pbCell = nil;
                 auto rAdjusted = r;
-                if (isPopupButton && tp == QStyleOptionTab::OnlyOneTab) {
+                if (isPopupButton && (tp == QStyleOptionTab::OnlyOneTab || isBigSurOrAbove)) {
+                    // Note: starting from macOS BigSur NSPopupButton has this
+                    // arrow 'button' in a different place and it became
+                    // quite visible 'in between' inactive tabs.
                     pbCell = static_cast<NSPopUpButtonCell *>(pb.cell);
                     oldPosition = pbCell.arrowPosition;
                     pbCell.arrowPosition = NSPopUpNoArrow;
@@ -3959,6 +4014,10 @@
                         // NSPopUpButton in this state is smaller.
                         rAdjusted.origin.x -= 3;
                         rAdjusted.size.width += 6;
+                        if (isBigSurOrAbove) {
+                            if (tp == QStyleOptionTab::End)
+                                rAdjusted.origin.x -= 2;
+                        }
                     }
                 }
 
@@ -4132,6 +4191,15 @@
                     return QMacStylePrivate::Button_RadioButton;
                 if (ffw->inherits("QLineEdit") || ffw->inherits("QTextEdit"))
                     return QMacStylePrivate::TextField;
+                if (const auto *pb = qobject_cast<const QPushButton *>(ffw)) {
+                    if (pb->isFlat() || (pb->rect().height()
+                        > pushButtonDefaultHeight[QStyleHelper::SizeLarge]
+                        && !(pb->testAttribute(Qt::WA_MacNormalSize))))
+                            return QMacStylePrivate::Button_SquareButton;
+                    if (pb->menu() != nullptr)
+                        return QMacStylePrivate::Button_PullDown;
+                    return QMacStylePrivate::Button_PushButton;
+                }
             }
 
             return QMacStylePrivate::Box; // Not really, just make it the default
@@ -4875,14 +4943,24 @@
                 = qstyleoption_cast<const QStyleOptionButton *>(opt)) {
             if ((buttonOpt->features & QStyleOptionButton::Flat))
                 break;  // leave rect alone
+            if ((buttonOpt->features & QStyleOptionButton::CommandLinkButton)) {
+                rect = opt->rect;
+                if (controlSize == QStyleHelper::SizeLarge)
+                    rect.adjust(+6, +4, -6, -8);
+                else if (controlSize == QStyleHelper::SizeSmall)
+                    rect.adjust(+5, +4, -5, -6);
+                else
+                    rect.adjust(+1, 0, -1, -2);
+                break;
+            }
         }
         rect = opt->rect;
         if (controlSize == QStyleHelper::SizeLarge) {
-            rect.adjust(+6, +4, -6, -8);
+            rect.adjust(0, +4, 0, -8);
         } else if (controlSize == QStyleHelper::SizeSmall) {
-            rect.adjust(+5, +4, -5, -6);
+            rect.adjust(0, +4, 0, -6);
         } else {
-            rect.adjust(+1, 0, -1, -2);
+            rect.adjust(0, 0, 0, -2);
         }
         break;
     case SE_RadioButtonLayoutItem:
@@ -6311,14 +6389,16 @@
         break;
 #endif
     case QStyle::CT_PushButton: {
-        if (const QStyleOptionButton *btn = qstyleoption_cast<const QStyleOptionButton *>(opt))
+        bool isFlat = false;
+        if (const QStyleOptionButton *btn = qstyleoption_cast<const QStyleOptionButton *>(opt)) {
             if (btn->features & QStyleOptionButton::CommandLinkButton)
                 return QCommonStyle::sizeFromContents(ct, opt, sz, widget);
+            isFlat = btn->features & QStyleOptionButton::Flat;
+        }
 
         // By default, we fit the contents inside a normal rounded push button.
         // Do this by add enough space around the contents so that rounded
         // borders (including highlighting when active) will show.
-        // TODO Use QFocusFrame and get rid of these horrors.
         QSize macsz;
         const auto controlSize = d->effectiveAquaSizeConstrain(opt, widget, CT_PushButton, sz, &macsz);
         // FIXME See comment in CT_PushButton case in qt_aqua_get_known_size().
@@ -6329,12 +6409,24 @@
         // All values as measured from HIThemeGetButtonBackgroundBounds()
         if (controlSize != QStyleHelper::SizeMini)
             sz.rwidth() += 12; // We like 12 over here.
-        if (controlSize == QStyleHelper::SizeLarge && sz.height() > 16)
-            sz.rheight() += pushButtonDefaultHeight[QStyleHelper::SizeLarge] - 16;
-        else if (controlSize == QStyleHelper::SizeMini)
-            sz.setHeight(24); // FIXME Our previous HITheme-based logic returned this.
-        else
-            sz.setHeight(pushButtonDefaultHeight[controlSize]);
+
+        if (controlSize == QStyleHelper::SizeLarge) {
+            if (!isFlat)
+                sz.rwidth() -= 12;
+            if (sz.height() > 16)
+                sz.rheight() += pushButtonDefaultHeight[QStyleHelper::SizeLarge] - 16;
+            else
+                sz.setHeight(pushButtonDefaultHeight[QStyleHelper::SizeLarge]);
+        } else {
+            if (!isFlat)
+                sz.rwidth() -= 10;
+            if (controlSize == QStyleHelper::SizeMini)
+                sz.setHeight(24);
+            else
+                sz.setHeight(pushButtonDefaultHeight[QStyleHelper::SizeSmall]);
+        }
+        if (isFlat)
+            sz.rwidth() -= 13;
         break;
     }
     case QStyle::CT_MenuItem:
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac: qmacstyle_mac_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles/mac: qmacstyle_mac_p_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles: styles.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src/plugins/styles: windowsvista
Only in ./qt-everywhere-src-5.15.2/qtbase/src: printsupport
Only in ./qt-everywhere-src-5.15.2/qtbase/src: sql
Only in ./qt-everywhere-src-5.15.2/qtbase/src: src.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src: testlib
Only in ./qt-everywhere-src-5.15.2/qtbase/src: tools
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: Qt5WidgetsConfigExtras.cmake.in
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: Qt5WidgetsMacros.cmake
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: QtWidgets.dynlist
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: accessible
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: configure.json
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: configure.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: dialogs
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: doc
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: effects
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: graphicsview
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: itemviews
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: kernel
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: qtwidgets.tracepoints
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: statemachine
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: styles
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: util
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractbutton.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractbutton.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractbutton_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractscrollarea.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractscrollarea.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractscrollarea_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractslider.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractslider.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractslider_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractspinbox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractspinbox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qabstractspinbox_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qbuttongroup.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qbuttongroup.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qbuttongroup_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcalendarwidget.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcalendarwidget.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcheckbox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcheckbox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcombobox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcombobox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcombobox_p.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qcommandlinkbutton.cpp ./5.15.2/qtbase/src/widgets/widgets/qcommandlinkbutton.cpp
--- ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qcommandlinkbutton.cpp	2021-11-17 14:43:50.000000000 +0700
+++ ./5.15.2/qtbase/src/widgets/widgets/qcommandlinkbutton.cpp	2021-11-17 14:45:14.000000000 +0700
@@ -216,6 +216,7 @@
     Q_Q(QCommandLinkButton);
     QPushButtonPrivate::init();
     q->setAttribute(Qt::WA_Hover);
+    q->setAttribute(Qt::WA_MacShowFocusRect, false);
 
     QSizePolicy policy(QSizePolicy::Preferred, QSizePolicy::Preferred, QSizePolicy::PushButton);
     policy.setHeightForWidth(true);
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qcommandlinkbutton.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdatetimeedit.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdatetimeedit.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdatetimeedit_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdial.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdial.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdialogbuttonbox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdialogbuttonbox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdockarealayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdockarealayout_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdockwidget.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdockwidget.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qdockwidget_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qeffects.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qeffects_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qfocusframe.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qfocusframe.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qfontcombobox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qfontcombobox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qframe.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qframe.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qframe_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qgroupbox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qgroupbox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qkeysequenceedit.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qkeysequenceedit.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qkeysequenceedit_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlabel.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlabel.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlabel_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlcdnumber.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlcdnumber.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlineedit.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlineedit.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlineedit_p.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qlineedit_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmaccocoaviewcontainer_mac.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmaccocoaviewcontainer_mac.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmacnativewidget_mac.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmacnativewidget_mac.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmainwindow.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmainwindow.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmainwindowlayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmainwindowlayout_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmdiarea.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmdiarea.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmdiarea_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmdisubwindow.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmdisubwindow.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmdisubwindow_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenu.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenu.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenu_mac.mm
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenu_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenubar.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenubar.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qmenubar_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qplaintextedit.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qplaintextedit.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qplaintextedit_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qprogressbar.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qprogressbar.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qpushbutton.cpp ./5.15.2/qtbase/src/widgets/widgets/qpushbutton.cpp
--- ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qpushbutton.cpp	2021-11-17 14:43:50.000000000 +0700
+++ ./5.15.2/qtbase/src/widgets/widgets/qpushbutton.cpp	2021-11-17 14:45:14.000000000 +0700
@@ -332,6 +332,8 @@
         option->state |= QStyle::State_On;
     if (!d->flat && !d->down)
         option->state |= QStyle::State_Raised;
+    if (underMouse() && hasMouseTracking())
+        option->state.setFlag(QStyle::State_MouseOver, d->hovering);
     option->text = d->text;
     option->icon = d->icon;
     option->iconSize = iconSize();
@@ -581,6 +583,13 @@
     d->_q_popupPressed();
 }
 
+void QPushButtonPrivate::init()
+{
+    Q_Q(QPushButton);
+    q->setAttribute(Qt::WA_MacShowFocusRect);
+    resetLayoutItemMargins();
+}
+
 void QPushButtonPrivate::_q_popupPressed()
 {
     Q_Q(QPushButton);
@@ -691,6 +700,18 @@
         updateGeometry();
     } else if (e->type() == QEvent::PolishRequest) {
         updateGeometry();
+    } else if (e->type() == QEvent::MouseMove) {
+        const QMouseEvent *mouseEvent = static_cast<QMouseEvent *>(e);
+        if (testAttribute(Qt::WA_Hover)) {
+            bool hit = false;
+            if (underMouse())
+                hit = hitButton(mouseEvent->pos());
+
+            if (hit != d->hovering) {
+                update(rect());
+                d->hovering = hit;
+            }
+        }
     }
     return QAbstractButton::event(e);
 }
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qpushbutton.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qpushbutton_p.h ./5.15.2/qtbase/src/widgets/widgets/qpushbutton_p.h
--- ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qpushbutton_p.h	2021-11-17 14:43:50.000000000 +0700
+++ ./5.15.2/qtbase/src/widgets/widgets/qpushbutton_p.h	2021-11-17 14:45:14.000000000 +0700
@@ -69,9 +69,11 @@
 
     QPushButtonPrivate()
         : QAbstractButtonPrivate(QSizePolicy::PushButton), autoDefault(Auto),
-          defaultButton(false), flat(false), menuOpen(false), lastAutoDefault(false) {}
+          defaultButton(false), flat(false), menuOpen(false), hovering(false),
+          lastAutoDefault(false)
+    {}
 
-    inline void init() { resetLayoutItemMargins(); }
+    void init();
     static QPushButtonPrivate* get(QPushButton *b) { return b->d_func(); }
 #if QT_CONFIG(menu)
     QPoint adjustedMenuPosition();
@@ -89,6 +91,7 @@
     uint defaultButton : 1;
     uint flat : 1;
     uint menuOpen : 1;
+    uint hovering : 1;
     mutable uint lastAutoDefault : 1;
 };
 
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qradiobutton.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qradiobutton.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qrubberband.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qrubberband.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qscrollarea.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qscrollarea.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qscrollarea_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qscrollbar.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qscrollbar.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qscrollbar_p.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qsizegrip.cpp ./5.15.2/qtbase/src/widgets/widgets/qsizegrip.cpp
--- ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qsizegrip.cpp	2021-11-17 14:43:50.000000000 +0700
+++ ./5.15.2/qtbase/src/widgets/widgets/qsizegrip.cpp	2021-11-17 14:45:14.000000000 +0700
@@ -271,6 +271,18 @@
     return Qt::Edges{};
 }
 
+static bool usePlatformSizeGrip(const QWidget *tlw)
+{
+    const QString &platformName = QGuiApplication::platformName();
+    if (platformName.contains(u"xcb")) // ### FIXME QTBUG-69716
+        return false;
+    if (tlw->testAttribute(Qt::WA_TranslucentBackground)
+        && platformName == u"windows") {
+        return false; // QTBUG-90628, flicker when using translucency
+    }
+    return true;
+}
+
 void QSizeGrip::mousePressEvent(QMouseEvent * e)
 {
     if (e->button() != Qt::LeftButton) {
@@ -290,11 +302,11 @@
         && tlw->windowHandle()
         && !(tlw->windowFlags() & Qt::X11BypassWindowManagerHint)
         && !tlw->testAttribute(Qt::WA_DontShowOnScreen)
-        && !tlw->hasHeightForWidth()) {
+        && !tlw->hasHeightForWidth()
+        && usePlatformSizeGrip(tlw)) {
         QPlatformWindow *platformWindow = tlw->windowHandle()->handle();
         const Qt::Edges edges = edgesFromCorner(d->m_corner);
-        if (!QGuiApplication::platformName().contains(QStringLiteral("xcb"))) // ### FIXME QTBUG-69716
-            d->m_platformSizeGrip = platformWindow && platformWindow->startSystemResize(edges);
+        d->m_platformSizeGrip = platformWindow->startSystemResize(edges);
     }
 
     if (d->m_platformSizeGrip)
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qsizegrip.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qslider.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qslider.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qspinbox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qspinbox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qsplashscreen.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qsplashscreen.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qsplitter.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qsplitter.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qsplitter_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qstackedwidget.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qstackedwidget.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qstatusbar.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qstatusbar.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtabbar.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtabbar.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtabbar_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtabwidget.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtabwidget.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtextbrowser.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtextbrowser.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtextedit.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtextedit.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtextedit_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbar.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbar.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbar_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbararealayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbararealayout_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbarextension.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbarextension_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbarlayout.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbarlayout_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbarseparator.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbarseparator_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbox.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbox.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbutton.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qtoolbutton.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgetanimator.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgetanimator_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgetlinecontrol.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgetlinecontrol_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgetresizehandler.cpp
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgetresizehandler_p.h
diff -ru ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qwidgettextcontrol.cpp ./5.15.2/qtbase/src/widgets/widgets/qwidgettextcontrol.cpp
--- ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets/qwidgettextcontrol.cpp	2021-11-17 14:43:50.000000000 +0700
+++ ./5.15.2/qtbase/src/widgets/widgets/qwidgettextcontrol.cpp	2021-11-17 14:45:14.000000000 +0700
@@ -1942,10 +1942,14 @@
     if (!menu)
         return;
     menu->setAttribute(Qt::WA_DeleteOnClose);
-    if (auto *window = static_cast<QWidget *>(parent)->window()->windowHandle()) {
-        QMenuPrivate::get(menu)->topData()->initialScreenIndex =
+
+    if (auto *widget = qobject_cast<QWidget *>(parent)) {
+        if (auto *window = widget->window()->windowHandle()) {
+            QMenuPrivate::get(menu)->topData()->initialScreenIndex =
                 QGuiApplication::screens().indexOf(window->screen());
+        }
     }
+
     menu->popup(screenPos);
 #endif
 }
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgettextcontrol_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: qwidgettextcontrol_p_p.h
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets/widgets: widgets.pri
Only in ./qt-everywhere-src-5.15.2/qtbase/src/widgets: widgets.pro
Only in ./qt-everywhere-src-5.15.2/qtbase/src: winmain
Only in ./qt-everywhere-src-5.15.2/qtbase/src: xml
Only in ./qt-everywhere-src-5.15.2/qtbase: sync.profile
Only in ./qt-everywhere-src-5.15.2/qtbase: tests
Only in ./qt-everywhere-src-5.15.2/qtbase: util
